<!DOCTYPE html>
<html lang="ja">
    <title>集合知ゲーム：いくつ入っている？</title>
    <style>
        body { font-family: sans-serif; text-align: center; }
        img { max-width: 90%; height: auto; border: 1px solid #ccc; }
        input { font-size: 1.2em; padding: 5px; }
        button { font-size: 1.2em; padding: 5px 10px; margin-left: 10px; }
        #main-content, #answered-message { padding: 20px; }
    </style>
</head>
<body>

    <div id="main-content">
        <h1>この箱には、お菓子がいくつ入っているでしょう？</h1>
        <p>あなたの直感を信じて、予想を入力してください。</p>

        <img src="sweets_box.png" alt="お菓子の箱">

        <div>
            <input type="number" id="userGuess" placeholder="例: 100">
            <button onclick="submitGuess()">予想を決定！</button>
        </div>
    </div>

    <div id="answered-message" style="display: none;">
        <h1>ご回答ありがとうございます</h1>
        <p>あなたはすでに回答済みです。</p>
        <a href="result.html">結果を確認する</a>
    </div>

    <script>
        // ▼▼▼ 追加 ▼▼▼
        // ページが読み込まれたときに実行
        window.onload = function() {
            // もし「回答済み」の記録があれば、メッセージを表示
            if (localStorage.getItem('hasAnswered') === 'true') {
                document.getElementById('main-content').style.display = 'none';
                document.getElementById('answered-message').style.display = 'block';
            }
        };
        // ▲▲▲ 追加 ▲▲▲

        // 「予想を決定！」ボタンが押されたときの処理
        function submitGuess() {
            const guess = document.getElementById('userGuess').value;
            if (guess === "") {
                alert("数字を入力してください。");
                return;
            }
            // 入力された値を保存
            localStorage.setItem('currentUserGuess', guess);

            // ▼▼▼ 追加 ▼▼▼
            // 「回答済み」の記録を保存
            localStorage.setItem('hasAnswered', 'true');
            // ▲▲▲ 追加 ▲▲▲

            window.location.href = 'result.html';
        }
    </script>
</body>
</html>