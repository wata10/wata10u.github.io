<!DOCTYPE html>
<html lang="ja">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>漢文句法クイズチャレンジ【10問ランダム版】</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
        }
        .font-serif {
            font-family: 'Noto Serif JP', serif;
        }
        #hakubun-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            line-height: 1.8;
            padding-right: 1rem; /* スクロールバーとの余白 */
            white-space: nowrap; /* 文章を折り返さず、縦にスクロールさせる */
        }
        .feedback-correct {
            color: #16a34a; /* green-600 */
        }
        .feedback-incorrect {
            color: #dc2626; /* red-600 */
        }
        /* スクロールバーのスタイル（モダンブラウザ向け） */
        .scrollbar-custom::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .scrollbar-custom::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
            border-radius: 10px;
        }
        .scrollbar-custom::-webkit-scrollbar-thumb {
            background: #94a3b8; /* slate-400 */
            border-radius: 10px;
        }
        .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* slate-500 */
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 flex items-center justify-center min-h-screen">

    <div id="quiz-container" class="w-full max-w-2xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-8">

        <div id="start-screen">
            <h1 class="text-3xl md:text-4xl font-bold text-center mb-4 text-slate-900">漢文句法クイズチャレンジ</h1>
            <p class="text-center text-slate-600 mb-8">全200問の中からランダムで10問が出題されます。準備ができたら下のボタンを押してください。</p>
            <button id="start-button" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors text-lg">
                10問クイズを開始する
            </button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div id="question-counter" class="text-lg font-bold text-slate-700"></div>
                <div id="score-counter" class="text-lg font-bold text-green-600"></div>
            </div>
            
            <div class="bg-slate-50 border-r-4 border-slate-200 p-4 rounded-lg mb-6 h-72 flex justify-center overflow-y-auto scrollbar-custom">
                <p id="hakubun-text" class="text-4xl font-serif text-slate-900"></p>
            </div>

            <div class="space-y-4">
                <div>
                    <label for="kakikudashi-input" class="block mb-1 font-bold text-slate-700">書き下し文</label>
                    <textarea id="kakikudashi-input" rows="2" class="w-full border-2 border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="書き下し文をここに入力"></textarea>
                </div>
                <div>
                    <label for="gendaigo-input" class="block mb-1 font-bold text-slate-700">現代語訳（参考）</label>
                    <textarea id="gendaigo-input" rows="2" class="w-full border-2 border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="現代語訳をここに入力（判定には含みません）"></textarea>
                </div>
            </div>

            <div id="feedback" class="mt-4 text-center font-bold text-lg min-h-[28px]"></div>
            
            <div class="mt-6 flex flex-col md:flex-row gap-4">
                <button id="check-button" class="w-full md:w-1/2 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors">解答を判定</button>
                <button id="next-button" class="w-full md:w-1/2 bg-slate-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-600 transition-colors" disabled>次の問題へ</button>
            </div>
            
            <div id="answer-display" class="hidden mt-6 p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg">
                <h4 class="font-bold text-yellow-800">正解</h4>
                <p class="text-yellow-700"><strong class="font-bold">句法：</strong> <span id="answer-kuhou"></span></p>
                <p class="text-yellow-700"><strong class="font-bold">書き下し文：</strong> <span id="answer-kakikudashi"></span></p>
                <p class="text-yellow-700"><strong class="font-bold">現代語訳：</strong> <span id="answer-gendaigo"></span></p>
            </div>
        </div>

        <div id="result-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold mb-4 text-slate-900">クイズ終了！</h2>
            <p class="text-xl text-slate-600 mb-6">お疲れ様でした。</p>
            <div class="text-5xl font-bold mb-8" id="final-score"></div>
            <p id="result-message" class="text-lg mb-8"></p>
            <button id="restart-button" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors text-lg">
                もう一度挑戦する
            </button>
        </div>

    </div>

    <script>
    // ▼▼▼▼▼▼▼▼▼▼▼▼▼▼ 修正箇所 ▼▼▼▼▼▼▼▼▼▼▼▼▼▼
    document.addEventListener('DOMContentLoaded', function() {
    // ▲▲▲▲▲▲▲▲▲▲▲▲▲▲ 修正箇所 ▲▲▲▲▲▲▲▲▲▲▲▲▲▲

        // --- データの準備 ---
        const questions = [
            // (データ部分は省略)
            { id: 1, kuhou: "返読文字(1)", hakubun: "有害無益。", kakikudashi: "害有りて益無し。", gendaigo: "害が有って何の益もない" },
            { id: 2, kuhou: "返読文字(1)", hakubun: "悪可変為善。", kakikudashi: "悪は変じて善と為すべし。", gendaigo: "悪は変えて善にすることができる。" },
            { id: 3, kuhou: "返読文字(1)", hakubun: "我為我。", kakikudashi: "我は我たり。", gendaigo: "私は私である。" },
            { id: 5, kuhou: "返読文字(2)", hakubun: "多労少功。", kakikudashi: "労多く功少し。", gendaigo: "苦労が多く、実りは少ない。" },
            { id: 6, kuhou: "返読文字(2)", hakubun: "少年易老学難成。", kakikudashi: "少年老い易く学成り難し。", gendaigo: "若者は年をとるのは早く、学問はなかなか成就しない。" },
            { id: 8, kuhou: "返読文字(2)", hakubun: "君自故郷来。", kakikudashi: "君故郷より来たる。", gendaigo: "君は故郷からやってきた。" },
            { id: 9, kuhou: "返読文字(2)", hakubun: "貧与賤是人之所悪也。", kakikudashi: "貧と賤とは是れ人の悪む所なり。", gendaigo: "貧乏と身分が低いことは人が誰もが嫌うものである。" },
            { id: 10, kuhou: "返読文字(2)", hakubun: "項氏所以失天下者何也。", kakikudashi: "項氏の天下を失ひし所以の者は何ぞや。", gendaigo: "項氏が天下を失ったわけは何か。" },
            { id: 11, kuhou: "再読文字(1)", hakubun: "未嘗敗北。", kakikudashi: "未だ嘗て敗北せず。", gendaigo: "まだ今まで一度も負けたことがない。" },
            { id: 12, kuhou: "再読文字(1)", hakubun: "始皇帝将死。", kakikudashi: "始皇帝将に死せんとす。", gendaigo: "始皇帝は今にも死にそうだ。" },
            { id: 13, kuhou: "再読文字(1)", hakubun: "日且入。", kakikudashi: "日且に入らんとす。", gendaigo: "日が今にも沈もうとしている。" },
            { id: 14, kuhou: "再読文字(1)", hakubun: "当惜寸陰。", kakikudashi: "当に寸陰を惜しむべし。", gendaigo: "わずかな時間も惜しまなければならない。" },
            { id: 15, kuhou: "再読文字(1)", hakubun: "応知故郷事。", kakikudashi: "応に故郷の事を知るべし。", gendaigo: "きっと故郷のことを知っているだろう。" },
            { id: 16, kuhou: "再読文字(2)", hakubun: "宜従師之言。", kakikudashi: "宜しく師の言に従ふべし。", gendaigo: "先生の言葉に従うのがよろしい。" },
            { id: 17, kuhou: "再読文字(2)", hakubun: "須常思病苦時。", kakikudashi: "須らく常に病苦の時を思ふべし。", gendaigo: "常に病気で苦しんだ時のことを思い出す必要がある。" },
            { id: 18, kuhou: "再読文字(2)", hakubun: "過猶不及。", kakikudashi: "過ぎたるは猶ほ及ばざるがごとし。", gendaigo: "行きすぎたことをするのは、そこまで及ばないのと同じだ。" },
            { id: 19, kuhou: "再読文字(2)", hakubun: "危由累卵。", kakikudashi: "危きこと由ほ累卵のごとし。", gendaigo: "危ないことはあたかも積み重ねた卵のようだ。" },
            { id: 20, kuhou: "再読文字(2)", hakubun: "盍学乎。", kakikudashi: "盍ぞ学ばざるや。", gendaigo: "どうして学ばないのか（学問したらどうか）。" },
            { id: 21, kuhou: "否定の基本形", hakubun: "人不学不知道。", kakikudashi: "人学ばざれば道を知らず。", gendaigo: "人は学ばなければ道理を知らない。" },
            { id: 22, kuhou: "否定の基本形", hakubun: "水清無大魚。", kakikudashi: "水清ければ大魚無し。", gendaigo: "水が澄んでいると大魚はいない。" },
            { id: 23, kuhou: "否定の基本形", hakubun: "莫知所答。", kakikudashi: "答ふる所を知ること莫し。", gendaigo: "答えることがわからない。" },
            { id: 24, kuhou: "否定の基本形", hakubun: "父母之喪無貴賤一也。", kakikudashi: "父母の喪は貴賤と無く一なり。", gendaigo: "父母の喪は貴賤を問わず同じである。" },
            { id: 25, kuhou: "否定の基本形", hakubun: "兵非君子器。", kakikudashi: "兵は君子の器に非ず。", gendaigo: "武器は君子の用いる道具ではない。" },
            { id: 26, kuhou: "不可能・禁止", hakubun: "朽木不可彫", kakikudashi: "朽木は彫るべからず。", gendaigo: "腐った木は彫ることができない。" },
            { id: 27, kuhou: "不可能・禁止", hakubun: "一寸光陰不可軽。", kakikudashi: "一寸の光陰軽んずべからず。", gendaigo: "わずかな時間も無駄にしてはいけない。" },
            { id: 28, kuhou: "不可能・禁止", hakubun: "材木不可勝用。", kakikudashi: "材木勝げて用ふべからず。", gendaigo: "材木は使い切れないほど多い。（「材木用ひるに勝ふべからず。」とも読める）" },
            { id: 29, kuhou: "不可能・禁止", hakubun: "其人不能応也。", kakikudashi: "其の人応ふる能はざるなり。", gendaigo: "其の人は答えることができなかった。" },
            { id: 30, kuhou: "不可能・禁止", hakubun: "終不得帰漢。", kakikudashi: "終に漢に帰るを得ず。", gendaigo: "とうとう漢に帰ることができなかった。" },
            { id: 31, kuhou: "不可能・禁止", hakubun: "莫能仰視。", kakikudashi: "能く仰ぎ視るもの莫し。", gendaigo: "仰ぎ見ることができるものはなかった。" },
            { id: 32, kuhou: "不可能・禁止", hakubun: "過則勿憚改。", kakikudashi: "過ちては則ち改むるに憚ること勿かれ。", gendaigo: "過ちを犯したら改めることをためらってはいけない。" },
            { id: 33, kuhou: "二重否定(1)", hakubun: "無不知愛其親。", kakikudashi: "其の親を愛するを知らざる無し。", gendaigo: "自分の親を愛することを知らないものはない。" },
            { id: 34, kuhou: "二重否定(1)", hakubun: "無木不枯。", kakikudashi: "木として枯れざるは無し。", gendaigo: "どんな木でも枯れないものはない。" },
            { id: 35, kuhou: "二重否定(1)", hakubun: "無非王土。", kakikudashi: "王土に非ざるは無し。", gendaigo: "王の土地でないものはない。" },
            { id: 36, kuhou: "二重否定(1)", hakubun: "非不説子之道。", kakikudashi: "子の道を説ばざるに非ず。", gendaigo: "先生の教えをうれしく思わないわけではない。" },
            { id: 37, kuhou: "二重否定(1)", hakubun: "君子非無過。", kakikudashi: "君子過ち無きに非ず。", gendaigo: "君子にだって過ちがないわけではない。" },
            { id: 38, kuhou: "二重否定(2)", hakubun: "未嘗不勝。", kakikudashi: "未だ嘗て勝たずんばあらず。", gendaigo: "まだ今まで一度も勝たなかったことはない。" },
            { id: 39, kuhou: "二重否定(2)", hakubun: "天下未嘗無賢者。", kakikudashi: "天下未だ嘗て賢者無くんばあらず。", gendaigo: "天下にまだ今まで賢者がいなかったことはない。" },
            { id: 40, kuhou: "二重否定(2)", hakubun: "不敢不告。", kakikudashi: "敢へて告げずんばあらず。", gendaigo: "告げないわけにはいかない。" },
            { id: 41, kuhou: "二重否定(2)", hakubun: "弟子不必不如師。", kakikudashi: "弟子必ずしも師に如かずんばあらず。", gendaigo: "弟子が必ずしも師匠に及ばないわけではない。" },
            { id: 42, kuhou: "二重否定(2)", hakubun: "言不可不慎。", kakikudashi: "言は慎まざるべからず。", gendaigo: "ことばは慎重に選ばなければならない。" },
            { id: 43, kuhou: "二重否定(2)", hakubun: "不能不学。", kakikudashi: "学ばざる能はず。", gendaigo: "学ばないではいられない。" },
            { id: 44, kuhou: "二重否定(2)", hakubun: "不得不語。", kakikudashi: "語らざるを得ず。", gendaigo: "話さないではいられない。" },
            { id: 45, kuhou: "部分否定と全部否定", hakubun: "伯楽不常有。", kakikudashi: "伯楽は常には有らず。", gendaigo: "伯楽はいつもいるとは限らない。" },
            { id: 46, kuhou: "部分否定と全部否定", hakubun: "伯楽常不有。", kakikudashi: "伯楽は常に有らず。", gendaigo: "伯楽はいつもいない。" },
            { id: 47, kuhou: "部分否定と全部否定", hakubun: "不復信。(意味も要確認)", kakikudashi: "復た信ぜず。", gendaigo: "二度と再び信じなかった。" },
            { id: 48, kuhou: "部分否定と全部否定", hakubun: "復不信。(意味も要確認)", kakikudashi: "復た信ぜず。", gendaigo: "今度もまた信じなかった。" },
            { id: 49, kuhou: "部分否定と全部否定", hakubun: "両虎闘不倶生。", kakikudashi: "両虎闘はば倶には生きず。", gendaigo: "二匹の虎が闘ったならば、両方とも行きているということはない。" },
            { id: 50, kuhou: "疑問・反語(1)", hakubun: "魯孔丘与", kakikudashi: "魯の孔丘か。", gendaigo: "魯の国の孔丘か。" },
            { id: 51, kuhou: "疑問・反語(1)", hakubun: "其真無馬邪。", kakikudashi: "其れ真に馬無きか", gendaigo: "そもそも本当に馬がいないのか。" },
            { id: 52, kuhou: "疑問・反語(1)", hakubun: "若非吾故人乎。", kakikudashi: "若は吾が故人に非ずや", gendaigo: "おまえは私の昔なじみではないか。" },
            { id: 53, kuhou: "疑問・反語(1)", hakubun: "可謂孝乎。", kakikudashi: "孝と謂ふべけんや。", gendaigo: "孝と言えるだろうか、いや言えない。" },
            { id: 54, kuhou: "疑問・反語(1)", hakubun: "何恭也。", kakikudashi: "何ぞ恭しきや。", gendaigo: "どうして丁重にするのか。" },
            { id: 55, kuhou: "疑問・反語(1)", hakubun: "吾何愛一牛。", kakikudashi: "吾何ぞ一牛を愛しまん。", gendaigo: "私はどうして一頭の牛を惜しんだりするだろうか、いや惜しんだりしない。" },
            { id: 56, kuhou: "疑問・反語(1)", hakubun: "何為不去也。", kakikudashi: "何為れぞ去らざるや", gendaigo: "どうして去らないのか。"},
            { id: 57, kuhou: "疑問・反語(2)", hakubun: "子安知之。(疑問)", kakikudashi: "子安くんぞ之を知る。", gendaigo: "あなたはどうしてそれを知っているのか。" },
            { id: 58, kuhou: "疑問・反語(2)", hakubun: "子安知之。(反語)", kakikudashi: "子安くんぞ之を知らん。", gendaigo: "あなたはどうしてそれを知っているだろうか、いや知っているはずがない。" },
            { id: 59, kuhou: "疑問・反語(2)", hakubun: "沛公安在。", kakikudashi: "沛公安くにか在る。", gendaigo: "沛公はどこにいるのか。" },
            { id: 60, kuhou: "疑問・反語(2)", hakubun: "自古誰無死。", kakikudashi: "古より誰か死無からん。", gendaigo: "昔からだれが死の訪れない者があるだろうか、いやだれにでも死は訪れる。" },
            { id: 61, kuhou: "疑問・反語(2)", hakubun: "孰為好学。", kakikudashi: "孰か学を好むと為す。", gendaigo: "だれが学問好きといえるか。" },
            { id: 62, kuhou: "疑問・反語(2)", hakubun: "何以殺人。", kakikudashi: "何を以てか人を殺す。", gendaigo: "どうして人を殺したのか。" },
            { id: 65, kuhou: "疑問・反語(3)", hakubun: "何謂浩然之気。", kakikudashi: "何をか浩然の気と謂ふ。", gendaigo: "何を浩然の気というのか。" },
            { id: 67, kuhou: "疑問・反語(3)", hakubun: "壮士行何畏。", kakikudashi: "壮士行くに何をか畏れん。", gendaigo: "壮士が行くにあたって何を畏れるだろうか、いや何も畏れない。" },
            { id: 68, kuhou: "疑問・反語(3)", hakubun: "何利之有。", kakikudashi: "何の利か之れ有らん。", gendaigo: "どのような利益があるだろうか。" },
            { id: 69, kuhou: "疑問・反語(3)", hakubun: "朋友之際如何。", kakikudashi: "朋友の際は如何せん。", gendaigo: "友人との交際はどうしたらよいか。" },
            { id: 70, kuhou: "疑問・反語(3)", hakubun: "虞兮虞兮奈若何。", kakikudashi: "虞や虞や若を奈何せん。", gendaigo: "虞よ虞よ、おまえをどうしたらよかろうか、もうどうしようもない。" },
            { id: 71, kuhou: "疑問・反語(3)", hakubun: "如何不涙垂。", kakikudashi: "如何ぞ涙垂れざらん。", gendaigo: "どうして涙を垂らさずにいられようか、いやいられない。" },
            { id: 72, kuhou: "疑問・反語(3)", hakubun: "人生幾何。", kakikudashi: "人生幾何ぞ。", gendaigo: "人生(の長さ)はどれほどであろうか、いやどれほどでもない。" },
            { id: 73, kuhou: "疑問・反語(4)", hakubun: "不読書何也。", kakikudashi: "書を読まざるは何ぞや。", gendaigo: "書物を読まないのはどうしてか。" },
            { id: 75, kuhou: "疑問・反語(4)", hakubun: "以五十歩笑百歩則何如。", kakikudashi: "五十歩を以て百歩を笑はば則ち何如。", gendaigo: "自分が五十歩だという理由で百歩逃げた者を笑ったとしたら、どうでしょうか。" },
            { id: 76, kuhou: "疑問・反語(4)", hakubun: "汝与回孰愈。", kakikudashi: "汝と回とは孰れか愈れる。", gendaigo: "おまえと顔回とはどちらがすぐれているか。" },
            { id: 77, kuhou: "疑問・反語(4)", hakubun: "視吾舌、尚在否。", kakikudashi: "吾が舌を視よ、尚ほ在りや否や。", gendaigo: "私の舌を見ろ、まだあるかどうか。" },
            { id: 78, kuhou: "疑問・反語(4)", hakubun: "寒梅開花未。", kakikudashi: "寒梅花を開きしや未だしや。", gendaigo: "寒梅は花をつけただろうか、まだだろうか。" },
            { id: 80, kuhou: "疑問・反語(5)", hakubun: "豈忘父母之恩哉。", kakikudashi: "豈に父母の恩を忘れんや。", gendaigo: "どうして父母の恩を忘れるだろうか、いや忘れたりはしない。" },
            { id: 81, kuhou: "疑問・反語(5)", hakubun: "独畏廉将軍哉。", kakikudashi: "独り廉将軍を畏れんや。", gendaigo: "どうして廉将軍を恐れるだろうか、いや恐れたりはしない。" },
            { id: 83, kuhou: "疑問・反語(5)", hakubun: "百獣之見我而敢不走乎。", kakikudashi: "百獣の我を見て敢へて走らざらんや。", gendaigo: "あらゆる獣たちが私を見て、どうして逃げ出さないだろうか、いやみんな逃げ出すだろう。" },
            { id: 84, kuhou: "使役", hakubun: "秦王使使者告趙王。", kakikudashi: "秦王使者をして趙王に告げしむ。", gendaigo: "秦王は使者をやって趙王に告げさせた。" },
            { id: 85, kuhou: "使役", hakubun: "院命義経討平氏。", kakikudashi: "院義経に命じて平氏を討たしむ。", gendaigo: "院は義経に命令して平氏を討伐させる。" },
            { id: 86, kuhou: "受身", hakubun: "信而見疑、忠而被謗", kakikudashi: "信にして疑はれ、忠にして謗らる。", gendaigo: "正直なのに疑われ、忠義なのに中傷される" },
            { id: 87, kuhou: "受身", hakubun: "欺人者却為人所欺。", kakikudashi: "人を欺く者は却つて人の欺く所と為る。", gendaigo: "人を欺く者は、かえって人に欺かれる。" },
            { id: 88, kuhou: "受身", hakubun: "労力者治於人。", kakikudashi: "力を労する者は人に治めらる。", gendaigo: "肉体労働をするものは人に治められる。" },
            { id: 89, kuhou: "比較・選択(1)", hakubun: "苛政猛於虎也。", kakikudashi: "苛政は虎よりも猛なり。", gendaigo: "苛酷な政治は虎よりも恐ろしい。" },
            { id: 90, kuhou: "比較・選択(1)", hakubun: "百聞不如一見。", kakikudashi: "百聞は一見に如かず。", gendaigo: "百回聞くよりも一度見るほうがよい。" },
            { id: 91, kuhou: "比較・選択(1)", hakubun: "人之所急無如其身。", kakikudashi: "人の急にする所は其の身に如くは無し。", gendaigo: "人が大切にするものに関しては、自分自身にまさるものはない。" },
            { id: 92, kuhou: "比較・選択(1)", hakubun: "天下之水莫大於海。", kakikudashi: "天下の水海より大なるは莫し。", gendaigo: "天下の水に関しては海より大きいものはない。" },
            { id: 93, kuhou: "比較・選択(1)", hakubun: "晋国天下莫強焉。", kakikudashi: "晋国は天下に焉より強なるは莫し。", gendaigo: "晋国は天下にこれより強大な国はない。" },
            { id: 94, kuhou: "比較・選択(2)", hakubun: "喪与其易寧戚。", kakikudashi: "喪は其の易まらんよりは寧ろ戚め。", gendaigo: "葬儀に関しては形が整っていることよりも、むしろ心から悲しむことだ。" },
            { id: 95, kuhou: "比較・選択(2)", hakubun: "与其生而無義、固不如烹。", kakikudashi: "其の生きて義無からんよりは、固より烹らるるに如かず。", gendaigo: "義を欠いた生き方をしているよりは、言うまでもなく煮殺されるほうがましだ。" },
            { id: 97, kuhou: "比較・選択(2)", hakubun: "寧為鶏口、無為牛後。", kakikudashi: "寧ろ鶏口と為るとも、牛後と為る無かれ。", gendaigo: "むしろ鶏のくちばしにはなっても、牛の尻にはなるな。" },
            { id: 99, kuhou: "比較・選択(2)", hakubun: "寧以義死、不苟幸生。", kakikudashi: "寧ろ義を以て死すとも、苟しくも生くることを幸はず。", gendaigo: "むしろ義のために死んでも、かりにも生きながらえることを願ったりはしない。" },
            { id: 100, kuhou: "比較・選択(2)", hakubun: "漢孰与我大。", kakikudashi: "漢は我の大なるに孰与れぞ。", gendaigo: "漢はわが国の大きさと比べてどうか。(わが国のほうが大きいのではないか)" },
            { id: 101, kuhou: "比較・選択(2)", hakubun: "与其有楽於身、孰若無憂於其心。", kakikudashi: "其の身に楽しみ有らんよりは、其の心に憂ひ無きに孰若れぞ。", gendaigo: "自分の体に快楽があるよりも、自分の心に心配事がない方が良い。" },
            { id: 102, kuhou: "仮定", hakubun: "学若無成不復還。", kakikudashi: "学若し成る無くんば復た還らず。", gendaigo: "もし学問が成就しなかったならば、二度と再び故郷へは帰らない。" },
            { id: 103, kuhou: "仮定", hakubun: "苟有天運得勝利。", kakikudashi: "苟しくも天運有らば勝利を得ん。", gendaigo: "かりにも天運があるならば必ず勝利が得られよう。" },
            { id: 104, kuhou: "仮定", hakubun: "微孔孟、王道不興。", kakikudashi: "孔孟微かりせば、王道興らざりしならん。", gendaigo: "孔子と孟子がいなかったらならば、王道は興らなかっただろう。" },
            { id: 105, kuhou: "仮定", hakubun: "縦彼不言、籍独不愧於心乎。", kakikudashi: "縦ひ彼言はずとも、籍独り心に愧ぢざらんや", gendaigo: "たとえ彼らが何も言わないとしても、私はどうして心のなかで恥じずにいられようか。" },
            { id: 106, kuhou: "仮定", hakubun: "雖不中不遠。", kakikudashi: "中たらずと雖も遠からず。", gendaigo: "あたっていないとはいっても、それほどはずれてはいない。" },
            { id: 107, kuhou: "限定", hakubun: "口耳之間四寸耳。", kakikudashi: "口耳の間は四寸のみ。", gendaigo: "口と耳の間は四寸にすぎない。" },
            { id: 108, kuhou: "限定", hakubun: "書足以記姓名而已。", kakikudashi: "書は以て姓名を記すに足るのみ。", gendaigo: "文字は姓名を書くのに役立つだけだ。" },
            { id: 109, kuhou: "限定", hakubun: "直不百歩耳。", kakikudashi: "直だ百歩ならざるのみ。", gendaigo: "ただ百歩でないというだけだ。" },
            { id: 110, kuhou: "限定", hakubun: "但聞人語響。", kakikudashi: "但だ人語の響を聞くのみ。", gendaigo: "ただ人の話し声が聞こえるだけだ。" },
            { id: 111, kuhou: "限定", hakubun: "今独臣有船。", kakikudashi: "今独り臣のみ船有り。", gendaigo: "今ただ私だけが船を持っています。" },
            { id: 112, kuhou: "限定", hakubun: "生還者僅三人而已。", kakikudashi: "生きて還る者僅かに三人のみ。", gendaigo: "生きて帰った者はわずかに三人にすぎない。" },
            { id: 113, kuhou: "限定", hakubun: "初極狭纔通人。", kakikudashi: "初めは極めて狭く纔かに人を通ずるのみ。", gendaigo: "最初は非常に狭く、やっと人一人がやっと通れるほどの幅しかない。" },
            { id: 114, kuhou: "抑揚", hakubun: "死馬且買之、況生者乎。", kakikudashi: "死馬すら且つ之を買ふ、況んや生ける者をや。", gendaigo: "死んだ馬でさえ買ったのだから、まして生きている名馬であればなおさら買うだろう。" },
            { id: 115, kuhou: "抑揚", hakubun: "至犬馬尽然、而況於人乎。", kakikudashi: "犬馬に至るまで尽く然り、而るを況んや人に於いてをや。", gendaigo: "犬や馬に至るまでみんなそうだ、なのに、まして人間であればなおさらそうだ。" },
            { id: 116, kuhou: "抑揚", hakubun: "以聖人之賢且学。", kakikudashi: "聖人の賢を以てすら且つ学ぶ。", gendaigo: "聖人のようにすぐれていてさえ、なお学ぶのだ。" },
            { id: 117, kuhou: "抑揚", hakubun: "臣死且不避、卮酒安足辞。", kakikudashi: "臣死すら且つ避けず、卮酒安くんぞ辞するに足らん。", gendaigo: "私は死ぬことさえ避けたりはしない、大杯の酒などどうして辞退することがあろうか。" },
            { id: 118, kuhou: "累加", hakubun: "不唯忘帰、可以終老。", kakikudashi: "唯だに帰るを忘るるのみならず、以て老を終ふべし。", gendaigo: "ただ都に帰るのを忘れるだけでなく、ここは晩年をすごすのによい土地だ。" },
            { id: 120, kuhou: "累加", hakubun: "不独漢朝、今亦有。", kakikudashi: "独り漢朝のみならず、今も亦有り。", gendaigo: "ただ漢王朝の時代だけでなく、今もまたある。" },
            { id: 121, kuhou: "累加", hakubun: "豈唯怠之、又従而盗之。", kakikudashi: "豈に唯だに之を怠るのみならんや、又従ひて之を盗む。", gendaigo: "どうしてただ怠けているだけであろうか、いやそれだけでなくさらに盗んでもいる。" },
            { id: 122, kuhou: "累加", hakubun: "何独丘哉。", kakikudashi: "何ぞ独り丘のみならんや。", gendaigo: "どうしてただ丘だけであろうか。" },
            { id: 123, kuhou: "願望", hakubun: "請君傾耳聴。", kakikudashi: "請ふ君耳を傾けて聴け。", gendaigo: "君よどうか耳を傾けて聞いてくれ。" },
            { id: 124, kuhou: "願望", hakubun: "請以剣舞。", kakikudashi: "請ふ剣を以て舞はん。", gendaigo: "どうか剣舞をさせてください。" },
            { id: 125, kuhou: "願望", hakubun: "願大王急渡。", kakikudashi: "願はくは大王急ぎ渡れ。", gendaigo: "どうか大王様急いでお渡りください。" },
            { id: 126, kuhou: "願望", hakubun: "願為子妻。", kakikudashi: "願はくは子が妻と為らん。", gendaigo: "どうかあなたの妻にさせてください。なんとかしてあなたの妻になりたい。" },
            { id: 127, kuhou: "願望", hakubun: "王庶幾改之。", kakikudashi: "王庶幾はくは之を改めよ。", gendaigo: "どうか王様これをお改めください。" },
            { id: 128, kuhou: "比況", hakubun: "人生如朝露。", kakikudashi: "人生は朝露のごとし。", gendaigo: "人生は朝の露のようなものだ。" },
            { id: 129, kuhou: "比況", hakubun: "士処世若錐処嚢中。", kakikudashi: "士の世に処るは錐の嚢中に処るがごとし。", gendaigo: "有能な人物がこの世にいるのは、錐がふくろの中にあるようなものだ。" },
            { id: 130, kuhou: "比況", hakubun: "譬如為山。", kakikudashi: "譬へば山を為るがごとし。", gendaigo: "たとえば山を作るようなものだ。" },
            { id: 131, kuhou: "比況", hakubun: "風景依稀似去年。", kakikudashi: "風景は依稀として去年に似たり。", gendaigo: "風景は相変わらず去年と同じだ。" },
            { id: 132, kuhou: "詠嘆", hakubun: "甚矣吾衰也。", kakikudashi: "甚だしいかな吾が衰へたるや。", gendaigo: "ひどいものだなあ私の衰えようは。" },
            { id: 134, kuhou: "詠嘆", hakubun: "逝者如斯夫、不舎昼夜。", kakikudashi: "逝く者は斯くのごときかな、昼夜を舎かず。", gendaigo: "流れゆくものは皆このようなものだなあ、昼も夜もとどまることがない。" },
            { id: 135, kuhou: "詠嘆", hakubun: "嗚呼哀哉。", kakikudashi: "嗚呼哀しいかな。", gendaigo: "ああ悲しいなあ。" },
            { id: 136, kuhou: "詠嘆", hakubun: "何楚人之多也。", kakikudashi: "何ぞ楚人の多きや。", gendaigo: "なんと楚の人間が多いことよ。" },
            { id: 137, kuhou: "詠嘆", hakubun: "豈不悲哉。", kakikudashi: "豈に悲しからずや。", gendaigo: "なんと悲しいことではないか。" },
            { id: 138, kuhou: "詠嘆", hakubun: "不亦楽乎。", kakikudashi: "亦た楽しからずや。", gendaigo: "なんと楽しいことではないか。" },
            { id: 139, kuhou: "詠嘆", hakubun: "君何其志之小也。", kakikudashi: "君何ぞ其れ志の小なるや。", gendaigo: "あなたはなんと志の小さいことよ。" },
        ];

        // --- DOM要素の取得 ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const startButton = document.getElementById('start-button');
        const checkButton = document.getElementById('check-button');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        
        const questionCounter = document.getElementById('question-counter');
        const scoreCounter = document.getElementById('score-counter');
        const hakubunText = document.getElementById('hakubun-text');
        
        const kakikudashiInput = document.getElementById('kakikudashi-input');
        const gendaigoInput = document.getElementById('gendaigo-input');
        
        const feedback = document.getElementById('feedback');
        const answerDisplay = document.getElementById('answer-display');
        const answerKuhou = document.getElementById('answer-kuhou');
        const answerKakikudashi = document.getElementById('answer-kakikudashi');
        const answerGendaigo = document.getElementById('answer-gendaigo');

        const finalScore = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        
        // --- クイズの状態管理 ---
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        // --- 関数の定義 ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            const allShuffled = shuffle([...questions]);
            shuffledQuestions = allShuffled.slice(0, 10);
            currentQuestionIndex = 0;
            score = 0;
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            displayQuestion();
        }

        function displayQuestion() {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionCounter.textContent = `第${currentQuestionIndex + 1}問 / ${shuffledQuestions.length}問`;
            scoreCounter.textContent = `正解数: ${score}`;
            hakubunText.textContent = currentQuestion.hakubun;
            
            kakikudashiInput.value = '';
            gendaigoInput.value = '';
            feedback.textContent = '';
            answerDisplay.classList.add('hidden');
            
            checkButton.disabled = false;
            nextButton.disabled = true;
            kakikudashiInput.focus();
        }

        function checkAnswer() {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const userKakikudashi = kakikudashiInput.value.trim().replace(/[。、]/g, '');
            const correctKakikudashi = currentQuestion.kakikudashi.trim().replace(/[。、]/g, '');

            if (userKakikudashi === correctKakikudashi) {
                feedback.textContent = '正解！';
                feedback.className = 'feedback-correct text-center font-bold text-lg min-h-[28px]';
                score++;
                scoreCounter.textContent = `正解数: ${score}`;
            } else {
                feedback.textContent = '不正解';
                feedback.className = 'feedback-incorrect text-center font-bold text-lg min-h-[28px]';
            }
            
            answerKuhou.textContent = currentQuestion.kuhou;
            answerKakikudashi.textContent = currentQuestion.kakikudashi;
            answerGendaigo.textContent = currentQuestion.gendaigo;
            answerDisplay.classList.remove('hidden');
            
            checkButton.disabled = true;
            nextButton.disabled = false;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                displayQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            finalScore.textContent = `${score} / ${shuffledQuestions.length}`;
            
            const percentage = (score / shuffledQuestions.length) * 100;
            if (percentage === 100) {
                resultMessage.textContent = '完璧です！句法マスターの称号を授けます。';
            } else if (percentage >= 80) {
                resultMessage.textContent = '素晴らしい成績です！句法の知識はほぼ完璧です。';
            } else if (percentage >= 60) {
                resultMessage.textContent = '良い調子です！苦手な部分を復習して完璧を目指しましょう。';
            } else {
                resultMessage.textContent = 'まだ伸びしろがありますね。繰り返し挑戦して知識を定着させましょう！';
            }
        }

        // --- イベントリスナーの設定 ---
        startButton.addEventListener('click', startQuiz);
        checkButton.addEventListener('click', checkAnswer);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', startQuiz);

        kakikudashiInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if(!checkButton.disabled) {
                   checkAnswer();
                }
            }
        });
        gendaigoInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if(!checkButton.disabled) {
                   checkAnswer();
                }
            }
        });

    // ▼▼▼▼▼▼▼▼▼▼▼▼▼▼ 修正箇所 ▼▼▼▼▼▼▼▼▼▼▼▼▼▼
    });
    // ▲▲▲▲▲▲▲▲▲▲▲▲▲▲ 修正箇所 ▲▲▲▲▲▲▲▲▲▲▲▲▲▲
    </script>

</body>
</html>




